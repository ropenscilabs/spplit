<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title> • spplit</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="">
<meta property="og:description" content="spplit">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">spplit</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.7.92</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/spplit.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/geospatial_queries.html">UNKNOWN TITLE</a>
    </li>
    <li>
      <a href="../articles/occurrences_meta.html">UNKNOWN TITLE</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/sckott/spplit/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="spplit_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip></h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/sckott/spplit/blob/master/vignettes/spplit.Rmd"><code>vignettes/spplit.Rmd</code></a></small>
      <div class="hidden name"><code>spplit.Rmd</code></div>

    </div>

    
    
<!--
%\VignetteEngine{knitr::knitr}
%\VignetteIndexEntry{Introduction to spplit}
%\VignetteEncoding{UTF-8}
-->
<div id="introduction-to-spplit" class="section level1">
<h1 class="hasAnchor">
<a href="#introduction-to-spplit" class="anchor"></a>Introduction to spplit</h1>
<p>A typical workflow looks like:</p>
<ul>
<li>Search for occurrences from GBIF or iDigBio</li>
<li>Get a species list</li>
<li>Get BHL metadata</li>
<li>Get BHL OCR’ed text</li>
<li>Save text to disk for later use - OR - analyze data</li>
</ul>
<p>A note about pipes: pipes (<code><a href="../reference/%&gt;%.html">%&gt;%</a></code>) are a relatively new thing in R. They make constructing what you want to do in R much easier, and should be easier for others to read as well. We use pipes in examples here, but you don’t have to use pipes.</p>
<div id="load-spplit" class="section level2">
<h2 class="hasAnchor">
<a href="#load-spplit" class="anchor"></a>load spplit</h2>
<div class="sourceCode" id="cb1"><pre class="downlit">
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st"><a href="https://github.com/sckott/spplit">"spplit"</a></span>)
</pre></div>
</div>
<div id="get-occurrences" class="section level2">
<h2 class="hasAnchor">
<a href="#get-occurrences" class="anchor"></a>Get occurrences</h2>
<p>In this example, we’ll do a geospatially defined query. You can also do a query based on taxonomic names, or a combination of geometry and taxonomic names.</p>
<p>Define a WKT string. For more about gemoetry queries, see the <code>Geospatial Queries</code> vignette.</p>
<div class="sourceCode" id="cb2"><pre class="downlit">
<span class="kw">wkt</span> <span class="op">&lt;-</span> <span class="st">'POLYGON((-124.07 41.48,-119.99 41.48,-119.99 35.57,-124.07 35.57,-124.07 41.48))'</span>
</pre></div>
<p>Use <code><a href="../reference/sp_occ_idigbio.html">sp_occ_idigbio()</a></code> to execute a query against iDigBio data. For brevity we’re limiting to 3 results, but you can set it at whatever you like, keeping in mind that the larger the <code>limit</code> value, the longer the query will take.</p>
<p>By default we’re using the botany collection from the CalAcademy. If perhaps searching across all collections makes more sense let me know and we can change that. You can easily change the CalAcademy collection being searched with the <code>cas_coll</code> parameter.</p>
<div class="sourceCode" id="cb3"><pre class="downlit">
<span class="kw">res</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sp_occ_idigbio.html">sp_occ_idigbio</a></span>(geometry = <span class="kw">wkt</span>, limit = <span class="fl">3</span>)
<span class="kw">res</span>
<span class="co">#&gt; Geometry [&lt;geo1&gt; (3)] </span>
<span class="co">#&gt; Source: local data frame [3 x 77]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;                                    name longitude latitude    prov</span>
<span class="co">#&gt;                                   &lt;chr&gt;     &lt;dbl&gt;    &lt;dbl&gt;   &lt;chr&gt;</span>
<span class="co">#&gt; 1              draba aureola  s. watson -121.4667 40.45940 idigbio</span>
<span class="co">#&gt; 2 beckmannia syzigachne  (steud.) fern. -122.8383 38.46425 idigbio</span>
<span class="co">#&gt; 3    albizia lophantha  (willd.) benth. -122.4583 37.75833 idigbio</span>
<span class="co">#&gt; Variables not shown: barcodevalue &lt;lgl&gt;, basisofrecord &lt;chr&gt;, bed &lt;lgl&gt;,</span>
<span class="co">#&gt;   catalognumber &lt;chr&gt;, class &lt;chr&gt;, collectioncode &lt;chr&gt;, collectionid</span>
<span class="co">#&gt;   &lt;lgl&gt;, collectionname &lt;lgl&gt;, collector &lt;chr&gt;, commonname &lt;lgl&gt;,</span>
<span class="co">#&gt;   continent &lt;chr&gt;, coordinateuncertainty &lt;lgl&gt;, country &lt;chr&gt;, countrycode</span>
<span class="co">#&gt;   &lt;chr&gt;, county &lt;chr&gt;, datecollected &lt;date&gt;, datemodified &lt;chr&gt;, dqs</span>
<span class="co">#&gt;   &lt;dbl&gt;, earliestageorloweststage &lt;lgl&gt;, earliestepochorlowestseries</span>
<span class="co">#&gt;   &lt;lgl&gt;, earliesteraorlowesterathem &lt;lgl&gt;, earliestperiodorlowestsystem</span>
<span class="co">#&gt;   &lt;lgl&gt;, etag &lt;chr&gt;, eventdate &lt;lgl&gt;, family &lt;chr&gt;, fieldnumber &lt;lgl&gt;,</span>
<span class="co">#&gt;   flags &lt;list&gt;, formation &lt;lgl&gt;, gbif_cannonicalname &lt;lgl&gt;, gbif_genus</span>
<span class="co">#&gt;   &lt;lgl&gt;, gbif_specificepithet &lt;lgl&gt;, gbif_taxonid &lt;lgl&gt;, genus &lt;chr&gt;,</span>
<span class="co">#&gt;   geoshape &lt;lgl&gt;, group &lt;lgl&gt;, hasImage &lt;lgl&gt;, hasMedia &lt;lgl&gt;, highertaxon</span>
<span class="co">#&gt;   &lt;chr&gt;, individualcount &lt;lgl&gt;, infraspecificepithet &lt;lgl&gt;,</span>
<span class="co">#&gt;   institutioncode &lt;chr&gt;, institutionid &lt;chr&gt;, institutionname &lt;lgl&gt;,</span>
<span class="co">#&gt;   kingdom &lt;chr&gt;, latestageorhigheststage &lt;lgl&gt;, latestepochorhighestseries</span>
<span class="co">#&gt;   &lt;lgl&gt;, latesteraorhighesterathem &lt;lgl&gt;, latestperiodorhighestsystem</span>
<span class="co">#&gt;   &lt;lgl&gt;, lithostratigraphicterms &lt;lgl&gt;, locality &lt;chr&gt;,</span>
<span class="co">#&gt;   lowestbiostratigraphiczone &lt;lgl&gt;, maxdepth &lt;lgl&gt;, maxelevation &lt;dbl&gt;,</span>
<span class="co">#&gt;   mediarecords &lt;lgl&gt;, member &lt;lgl&gt;, mindepth &lt;lgl&gt;, minelevation &lt;dbl&gt;,</span>
<span class="co">#&gt;   municipality &lt;lgl&gt;, occurrenceid &lt;chr&gt;, order &lt;chr&gt;, phylum &lt;chr&gt;,</span>
<span class="co">#&gt;   recordids &lt;list&gt;, recordnumber &lt;chr&gt;, recordset &lt;chr&gt;, specificepithet</span>
<span class="co">#&gt;   &lt;chr&gt;, startdayofyear &lt;int&gt;, stateprovince &lt;chr&gt;, typestatus &lt;lgl&gt;, uuid</span>
<span class="co">#&gt;   &lt;chr&gt;, verbatimeventdate &lt;chr&gt;, verbatimlocality &lt;lgl&gt;, version &lt;lgl&gt;,</span>
<span class="co">#&gt;   waterbody &lt;lgl&gt;.</span>
</pre></div>
</div>
<div id="get-a-species-list" class="section level2">
<h2 class="hasAnchor">
<a href="#get-a-species-list" class="anchor"></a>Get a species list</h2>
<p>After getting back some occurrence data, but before getting some data from the BHL, we need a species list because there’s no point in sending duplicate queries to BHL.</p>
<div class="sourceCode" id="cb4"><pre class="downlit">
<span class="kw">spplist</span> <span class="op">&lt;-</span> <span class="kw">res</span> <span class="op">%&gt;%</span> <span class="fu"><a href="../reference/sp_list.html">sp_list</a></span>()
<span class="kw">spplist</span>
<span class="co">#&gt; [1] "albizia lophantha"     "beckmannia syzigachne" "draba aureola"</span>
</pre></div>
</div>
<div id="get-bhl-metadata" class="section level2">
<h2 class="hasAnchor">
<a href="#get-bhl-metadata" class="anchor"></a>Get BHL metadata</h2>
<p>For BHL, we first need to search BHL for the species list we just made. Some taxa may be in BHL and some may not. The returned data we’ll get in this step will contain the information we need to get pages from texts that contain information about the taxa of interest.</p>
<div class="sourceCode" id="cb5"><pre class="downlit">
<span class="kw">bhldat</span> <span class="op">&lt;-</span> <span class="kw">spplist</span> <span class="op">%&gt;%</span> <span class="fu"><a href="../reference/sp_bhl_meta.html">sp_bhl_meta</a></span>()
<span class="kw">bhldat</span>
<span class="co">#&gt; &lt;bhl metadata&gt;</span>
<span class="co">#&gt;   Count: 3</span>
<span class="co">#&gt;   taxon / no. items / total pages [1st 10]: </span>
<span class="co">#&gt;     albizia lophantha / 10 / 21</span>
<span class="co">#&gt;     beckmannia syzigachne / 121 / 260</span>
<span class="co">#&gt;     draba aureola / 31 / 47</span>
</pre></div>
<p>You can combine BHL metadata into a data.frame for easier viewing/manipulation:</p>
<div class="sourceCode" id="cb6"><pre class="downlit">
<span class="fu"><a href="../reference/as_df.html">as_df</a></span>(<span class="kw">bhldat</span>)
<span class="co">#&gt; $`albizia lophantha`</span>
<span class="co">#&gt; Source: local data frame [21 x 31]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;    ItemID PrimaryTitleID ThumbnailPageID           Source</span>
<span class="co">#&gt;     &lt;int&gt;          &lt;lgl&gt;           &lt;lgl&gt;            &lt;chr&gt;</span>
<span class="co">#&gt; 1   49423             NA              NA Internet Archive</span>
<span class="co">#&gt; 2  130257             NA              NA Internet Archive</span>
<span class="co">#&gt; 3  130257             NA              NA Internet Archive</span>
<span class="co">#&gt; 4   90643             NA              NA Internet Archive</span>
<span class="co">#&gt; 5   90643             NA              NA Internet Archive</span>
<span class="co">#&gt; 6   90643             NA              NA Internet Archive</span>
<span class="co">#&gt; 7   91490             NA              NA Internet Archive</span>
<span class="co">#&gt; 8   91490             NA              NA Internet Archive</span>
<span class="co">#&gt; 9   91178             NA              NA Internet Archive</span>
<span class="co">#&gt; 10  91178             NA              NA Internet Archive</span>
<span class="co">#&gt; ..    ...            ...             ...              ...</span>
<span class="co">#&gt; Variables not shown: SourceIdentifier &lt;chr&gt;, Volume &lt;chr&gt;, Year &lt;lgl&gt;,</span>
<span class="co">#&gt;   Contributor &lt;chr&gt;, Sponsor &lt;lgl&gt;, Language &lt;lgl&gt;, LicenseUrl &lt;lgl&gt;,</span>
<span class="co">#&gt;   Rights &lt;lgl&gt;, DueDiligence &lt;lgl&gt;, CopyrightStatus &lt;lgl&gt;, CopyrightRegion</span>
<span class="co">#&gt;   &lt;lgl&gt;, ExternalUrl &lt;lgl&gt;, ItemUrl &lt;chr&gt;, TitleUrl &lt;lgl&gt;, ItemThumbUrl</span>
<span class="co">#&gt;   &lt;lgl&gt;, Parts &lt;lgl&gt;, Collections &lt;lgl&gt;, PageID &lt;int&gt;, Issue &lt;chr&gt;,</span>
<span class="co">#&gt;   PageUrl &lt;chr&gt;, ThumbnailUrl &lt;chr&gt;, FullSizeImageUrl &lt;chr&gt;, OcrUrl &lt;chr&gt;,</span>
<span class="co">#&gt;   OcrText &lt;lgl&gt;, PageTypes &lt;list&gt;, PageNumbers &lt;list&gt;, Names &lt;lgl&gt;.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`beckmannia syzigachne`</span>
<span class="co">#&gt; Source: local data frame [260 x 31]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;    ItemID PrimaryTitleID ThumbnailPageID           Source</span>
<span class="co">#&gt;     &lt;int&gt;          &lt;lgl&gt;           &lt;lgl&gt;            &lt;chr&gt;</span>
<span class="co">#&gt; 1  120919             NA              NA Internet Archive</span>
<span class="co">#&gt; 2   69217             NA              NA Internet Archive</span>
<span class="co">#&gt; 3  115257             NA              NA Internet Archive</span>
<span class="co">#&gt; 4  114250             NA              NA Internet Archive</span>
<span class="co">#&gt; 5   63628             NA              NA Internet Archive</span>
<span class="co">#&gt; 6  120746             NA              NA Internet Archive</span>
<span class="co">#&gt; 7  120746             NA              NA Internet Archive</span>
<span class="co">#&gt; 8  120746             NA              NA Internet Archive</span>
<span class="co">#&gt; 9   89178             NA              NA Internet Archive</span>
<span class="co">#&gt; 10  89179             NA              NA Internet Archive</span>
<span class="co">#&gt; ..    ...            ...             ...              ...</span>
<span class="co">#&gt; Variables not shown: SourceIdentifier &lt;chr&gt;, Volume &lt;chr&gt;, Year &lt;lgl&gt;,</span>
<span class="co">#&gt;   Contributor &lt;chr&gt;, Sponsor &lt;lgl&gt;, Language &lt;lgl&gt;, LicenseUrl &lt;lgl&gt;,</span>
<span class="co">#&gt;   Rights &lt;lgl&gt;, DueDiligence &lt;lgl&gt;, CopyrightStatus &lt;lgl&gt;, CopyrightRegion</span>
<span class="co">#&gt;   &lt;lgl&gt;, ExternalUrl &lt;lgl&gt;, ItemUrl &lt;chr&gt;, TitleUrl &lt;lgl&gt;, ItemThumbUrl</span>
<span class="co">#&gt;   &lt;lgl&gt;, Parts &lt;lgl&gt;, Collections &lt;lgl&gt;, PageID &lt;int&gt;, Issue &lt;chr&gt;,</span>
<span class="co">#&gt;   PageUrl &lt;chr&gt;, ThumbnailUrl &lt;chr&gt;, FullSizeImageUrl &lt;chr&gt;, OcrUrl &lt;chr&gt;,</span>
<span class="co">#&gt;   OcrText &lt;lgl&gt;, PageTypes &lt;list&gt;, PageNumbers &lt;list&gt;, Names &lt;lgl&gt;.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $`draba aureola`</span>
<span class="co">#&gt; Source: local data frame [47 x 31]</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;    ItemID PrimaryTitleID ThumbnailPageID           Source</span>
<span class="co">#&gt;     &lt;int&gt;          &lt;lgl&gt;           &lt;lgl&gt;            &lt;chr&gt;</span>
<span class="co">#&gt; 1   87374             NA              NA Internet Archive</span>
<span class="co">#&gt; 2   87374             NA              NA Internet Archive</span>
<span class="co">#&gt; 3   87374             NA              NA Internet Archive</span>
<span class="co">#&gt; 4  126935             NA              NA Internet Archive</span>
<span class="co">#&gt; 5   93711             NA              NA Internet Archive</span>
<span class="co">#&gt; 6   93711             NA              NA Internet Archive</span>
<span class="co">#&gt; 7   62964             NA              NA Internet Archive</span>
<span class="co">#&gt; 8   74748             NA              NA Internet Archive</span>
<span class="co">#&gt; 9   69300             NA              NA Internet Archive</span>
<span class="co">#&gt; 10   8002             NA              NA Internet Archive</span>
<span class="co">#&gt; ..    ...            ...             ...              ...</span>
<span class="co">#&gt; Variables not shown: SourceIdentifier &lt;chr&gt;, Volume &lt;chr&gt;, Year &lt;lgl&gt;,</span>
<span class="co">#&gt;   Contributor &lt;chr&gt;, Sponsor &lt;lgl&gt;, Language &lt;lgl&gt;, LicenseUrl &lt;lgl&gt;,</span>
<span class="co">#&gt;   Rights &lt;lgl&gt;, DueDiligence &lt;lgl&gt;, CopyrightStatus &lt;lgl&gt;, CopyrightRegion</span>
<span class="co">#&gt;   &lt;lgl&gt;, ExternalUrl &lt;lgl&gt;, ItemUrl &lt;chr&gt;, TitleUrl &lt;lgl&gt;, ItemThumbUrl</span>
<span class="co">#&gt;   &lt;lgl&gt;, Parts &lt;lgl&gt;, Collections &lt;lgl&gt;, PageID &lt;int&gt;, Issue &lt;chr&gt;,</span>
<span class="co">#&gt;   PageUrl &lt;chr&gt;, ThumbnailUrl &lt;chr&gt;, FullSizeImageUrl &lt;chr&gt;, OcrUrl &lt;chr&gt;,</span>
<span class="co">#&gt;   OcrText &lt;lgl&gt;, PageTypes &lt;list&gt;, PageNumbers &lt;list&gt;, Names &lt;lgl&gt;.</span>
</pre></div>
<p>Note how each taxon gets a different data.frame. You can combine them all into one via something like <code><a href="https://dplyr.tidyverse.org/reference/bind.html">dplyr::bind_rows()</a></code>.</p>
</div>
<div id="get-ocr-text" class="section level2">
<h2 class="hasAnchor">
<a href="#get-ocr-text" class="anchor"></a>Get OCR text</h2>
<p>Now that we have metadata, we want to get OCR pages - or text of digitized pages that has been generated through Optical Character Recognition.</p>
<div class="sourceCode" id="cb7"><pre class="downlit">
<span class="kw">ocrdat</span> <span class="op">&lt;-</span> <span class="kw">bhldat</span> <span class="op">%&gt;%</span> <span class="fu"><a href="../reference/sp_bhl_ocr.html">sp_bhl_ocr</a></span>()
<span class="kw">ocrdat</span>
<span class="co">#&gt; $`albizia lophantha`</span>
<span class="co">#&gt; &lt;bhl ocr'ed text&gt;</span>
<span class="co">#&gt;   Count: 10</span>
<span class="co">#&gt;   no. pages / total character count [1st 10]:</span>
<span class="co">#&gt;     1 / 2826</span>
<span class="co">#&gt;     2 / 7498</span>
<span class="co">#&gt;     5 / 18561</span>
<span class="co">#&gt;     2 / 5010</span>
<span class="co">#&gt;     1 / 6238</span>
<span class="co">#&gt;     1 / 3305</span>
<span class="co">#&gt;     1 / 2052</span>
<span class="co">#&gt;     1 / 4135</span>
<span class="co">#&gt;     6 / 20270</span>
<span class="co">#&gt;     1 / 2257</span>
<span class="co">#&gt;</span>
<span class="co">#&gt; $`beckmannia syzigachne`</span>
<span class="co">#&gt; &lt;bhl ocr'ed text&gt;</span>
<span class="co">#&gt;   Count: 121</span>
<span class="co">#&gt;   no. pages / total character count [1st 10]:</span>
<span class="co">#&gt;     1 / 1682</span>
<span class="co">#&gt;     2 / 6801</span>
<span class="co">#&gt;     1 / 2456</span>
<span class="co">#&gt;     1 / 1600</span>
<span class="co">#&gt;     3 / 7152</span>
<span class="co">#&gt;     21 / 79223</span>
<span class="co">#&gt;     1 / 35</span>
<span class="co">#&gt;     1 / 3224</span>
<span class="co">#&gt;     1 / 2750</span>
<span class="co">#&gt;     1 / 1826</span>
<span class="co">#&gt;</span>
<span class="co">#&gt; $`draba aureola`</span>
<span class="co">#&gt; &lt;bhl ocr'ed text&gt;</span>
<span class="co">#&gt;   Count: 31</span>
<span class="co">#&gt;   no. pages / total character count [1st 10]:</span>
<span class="co">#&gt;     3 / 10860</span>
<span class="co">#&gt;     1 / 2620</span>
<span class="co">#&gt;     2 / 5764</span>
<span class="co">#&gt;     1 / 3838</span>
<span class="co">#&gt;     1 / 3838</span>
<span class="co">#&gt;     1 / 3877</span>
<span class="co">#&gt;     1 / 1847</span>
<span class="co">#&gt;     1 / 2272</span>
<span class="co">#&gt;     1 / 3774</span>
<span class="co">#&gt;     1 / 3234</span>
</pre></div>
<p>Note that the OCR text we get back has essentially no structure. It’s simply plain text, and there’s little metadata to work with.</p>
<p>You can view the pages with a utility in this package, which will open a separate browser tab in your default browser for each taxon. Each taxon page has a different panel for each BHL item, where each item can have many pages.</p>
<div class="sourceCode" id="cb8"><pre class="downlit">
<span class="fu"><a href="../reference/viewer.html">viewer</a></span>(<span class="kw">ocrdat</span>)
</pre></div>
<div class="figure">
<img src="../man/figures/viewer_eg1.png" alt=""><p class="caption">img</p>
</div>
<p>Note that right now the text is all concatentated together - I am working on making it prettier. Let me know if you think this viewer is useful.</p>
</div>
<div id="save-text-to-disk" class="section level2">
<h2 class="hasAnchor">
<a href="#save-text-to-disk" class="anchor"></a>Save text to disk</h2>
<p>After all the work above, you’ll likely want to save the OCR pages to disk before quitting your R session.</p>
<div class="sourceCode" id="cb9"><pre class="downlit">
<span class="fu"><a href="../reference/sp_bhl_save.html">sp_bhl_save</a></span>(<span class="kw">ocrdat</span>)
<span class="co">#&gt; ocr text written to files in ./albizia_lophantha</span>
<span class="co">#&gt; ocr text written to files in ./beckmannia_syzigachne</span>
<span class="co">#&gt; ocr text written to files in ./draba_aureola</span>
</pre></div>
<p>By default, <code><a href="../reference/sp_bhl_save.html">sp_bhl_save()</a></code> saves each each taxon to a separate folder, where each taxon folder will have every page as a separate file. In cases where it’s ambiguous what the name of the folder should be we give it a random alphanumeric string for a name.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Scott Chamberlain.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
